# 천마비고 개발 가이드

## 프로젝트 개요

천마비고는 자연어 상호작용을 통해 개인 재정 관리를 혁신하는 대화형 AI 재정 코치 모바일 애플리케이션입니다. 사용자는 AI 코치와 대화만으로 재정을 관리할 수 있어, 기존 가계부 앱의 복잡성을 완전히 제거합니다.

### 핵심 기능
- **대화형 거래 입력**: 음성/텍스트를 통한 자연어 지출 기록
- **AI 재정 코치**: LGAI EXAONE 3.5 7.8B를 활용한 개인화된 재정 조언
- **스마트 예산 추적**: 실시간 지출 분석 및 예측
- **게임화**: 저축 목표 달성을 위한 성취 시스템
- **데이터 시각화**: 차트, 진행률 표시기, 지출 인사이트

### 타겟 사용자
- MZ세대 (25-39세)
- 월소득 200-500만원
- 복잡한 재정 관리 앱에 불만족한 사용자
- 한국어 사용자, 모바일 우선 사용자

## 기술 스택

### 프론트엔드
- **React Native**: 크로스 플랫폼 모바일 개발
- **NativeWind**: React Native용 Tailwind CSS 스타일링
- **TypeScript**: 타입 안전성과 향상된 개발자 경험
- **Expo Router**: 파일 기반 내비게이션 시스템
- **React Native Reanimated**: 부드러운 애니메이션

### AI 통합
- **LGAI EXAONE 3.5 7.8B**: 한국어 최적화 대화형 AI 모델
- **Hugging Face Transformers**: 모델 통합
- **음성 인식**: React Native Voice를 통한 음성 입력
- **자연어 처리**: 한국어 텍스트 분석

### 백엔드 & 데이터
- **Node.js/Express**: REST API 서버
- **PostgreSQL**: 주요 데이터베이스
- **Redis**: 캐싱 및 세션 관리
- **JWT**: 인증
- **AWS**: 클라우드 인프라

## 디자인 시스템

### 색상 팔레트
- **주요색**: 보라색/바이올렛 (#7C3AED)
- **보조색**: 연보라색 (#A855F7)
- **배경색**: 깔끔한 흰색 (#FFFFFF)
- **텍스트**: 진한 회색 (#1F2937)
- **성공**: 녹색 (#10B981)
- **경고**: 주황색 (#F59E0B)
- **오류**: 빨간색 (#EF4444)

### UI 컴포넌트
- **카드**: 둥근 모서리 (16px), 미묘한 그림자
- **버튼**: 액션용 원형, 주요 기능용 둥근 직사각형
- **진행률 표시기**: 그라데이션 보라색, 8px 높이
- **타이포그래피**: 깔끔하고 읽기 쉬운 폰트 (Inter/System)
- **아이콘**: 외곽선 스타일, 일관된 굵기

### 레이아웃 원칙
- **모바일 우선**: 휴대폰 화면에 최적화
- **카드 기반**: 소화하기 쉬운 카드 형태의 정보
- **최소한의 내비게이션**: 하단 탭 바만 사용
- **대화형 UI**: 채팅 인터페이스를 주요 상호작용으로 사용

## 프로젝트 구조

```
/
├── src/
│   ├── components/         # 재사용 가능한 UI 컴포넌트
│   │   ├── ui/            # 기본 UI 요소 (Button, Card 등)
│   │   ├── charts/        # 데이터 시각화 컴포넌트
│   │   └── forms/         # 폼 컴포넌트
│   ├── screens/           # 화면 컴포넌트
│   │   ├── chat/          # AI 채팅 인터페이스
│   │   ├── dashboard/     # 메인 대시보드
│   │   ├── analytics/     # 지출 분석
│   │   └── settings/      # 사용자 설정
│   ├── services/          # API 및 외부 서비스
│   │   ├── ai/            # EXAONE 모델 통합
│   │   ├── api/           # REST API 호출
│   │   └── storage/       # 로컬 데이터 저장
│   ├── utils/             # 헬퍼 함수
│   ├── types/             # TypeScript 타입 정의
│   └── constants/         # 앱 상수
├── assets/                # 이미지, 폰트, 아이콘
├── docs/                  # 문서
└── tests/                 # 테스트 파일
```

## 개발 가이드라인

### 코드 스타일
- 모든 새 파일에 TypeScript 사용
- ESLint 및 Prettier 설정 준수
- 훅을 사용한 함수형 컴포넌트 사용
- 적절한 에러 바운더리 구현
- 복잡한 함수에 JSDoc 주석 추가

### 상태 관리
- 전역 상태에 Zustand 사용
- 가능한 경우 컴포넌트에서 로컬 상태 유지
- 적절한 로딩 및 에러 상태 구현
- 자주 사용하는 데이터 캐싱

### 성능
- 비용이 많이 드는 컴포넌트에 React.memo 구현
- 화면 지연 로딩 사용
- 이미지 및 애셋 최적화
- 적절한 리스트 가상화 구현

### 보안
- 민감한 재정 데이터 암호화
- 적절한 인증 구현
- 모든 사용자 입력 검증
- 데이터 처리를 위한 GDPR 준수

## AI 통합 패턴

### EXAONE 3.5 설정
```javascript
import { AutoModelForCausalLM, AutoTokenizer } from '@xenova/transformers';

const modelName = "LGAI-EXAONE/EXAONE-3.5-7.8B-Instruct";
const systemPrompt = "당신은 천마비고라는 이름의 도움이 되는 한국 재정 어시스턴트입니다.";
```

### 대화 흐름
1. 사용자 입력 (음성/텍스트)
2. 자연어 처리
3. 의도 인식 (지출, 질문, 목표)
4. AI 응답 생성
5. 액션 실행 (거래 저장, 조언 제공)

### 응답 유형
- **거래 기록**: "김치찌개 8천원 기록했어요"
- **재정 조언**: "이번 주 카페비가 평소보다 40% 높아요"
- **목표 추적**: "저축 목표의 65% 달성했네요!"
- **지출 인사이트**: "외식비를 20% 줄이면 월 12만원 절약 가능해요"

## 주요 명령어

### 설정
- `npm install` - 의존성 설치
- `npx expo install` - Expo 의존성 설치
- `npm run ios` - iOS 시뮬레이터에서 실행
- `npm run android` - Android 에뮬레이터에서 실행

### 개발
- `npm run start` - 개발 서버 시작
- `npm run lint` - ESLint 실행
- `npm run typecheck` - TypeScript 검사 실행
- `npm run test` - 테스트 실행
- `npm run build` - 프로덕션 빌드

### AI 모델
- `npm run model:download` - EXAONE 모델 다운로드
- `npm run model:test` - AI 응답 테스트
- `npm run model:optimize` - 모바일용 모델 최적화

## 테스트 전략

### 단위 테스트
- 유틸리티 함수 테스트
- AI 응답 파싱 테스트
- 데이터 변환 테스트
- 컴포넌트 로직 테스트

### 통합 테스트
- API 상호작용 테스트
- AI 모델 통합 테스트
- 내비게이션 플로우 테스트
- 상태 관리 테스트

### E2E 테스트
- 완전한 사용자 여정 테스트
- 음성 입력 워크플로우 테스트
- 거래 기록 테스트
- 목표 달성 플로우 테스트

## 배포

### 빌드 프로세스
1. 테스트 및 린팅 실행
2. 프로덕션 번들 빌드
3. 애셋 최적화
4. 플랫폼별 빌드 생성

### 환경 변수
- `EXAONE_API_KEY`: AI 모델 API 키
- `DATABASE_URL`: 데이터베이스 연결
- `REDIS_URL`: 캐시 연결
- `JWT_SECRET`: 인증 시크릿

## 성능 목표

- **앱 실행**: < 3초
- **AI 응답**: < 2초
- **화면 내비게이션**: < 500ms
- **음성 인식**: < 1초
- **데이터 동기화**: < 5초

## 현지화

- 주요 언어: 한국어
- 한국 재정 용어 지원
- 한국 통화 형식 (원)
- 한국 날짜/시간 형식
- 지출 카테고리의 문화적 맥락

## 접근성

- 음성 제어 지원
- 스크린 리더 호환성
- 고대비 모드
- 큰 텍스트 지원
- 제스처 기반 내비게이션

기억하세요: 이 앱은 재정 관리를 친구와 채팅하는 것만큼 쉽게 만드는 것을 목표로 합니다. 복잡한 기능보다는 단순함과 대화형 UX를 우선시하세요. 천마비고(天魔秘告)는 '천마의 비밀 두루마리'라는 의미로, 마치 고대 무공을 배우듯 사용자가 재정을 마스터하도록 돕는 강력한 AI입니다.